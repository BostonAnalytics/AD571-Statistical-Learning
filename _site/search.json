[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Statistical Learning Lecture Notes",
    "section": "",
    "text": "library(tidyverse)\nlibrary(kableExtra)\n\ntbl &lt;- tribble(\n  ~\"pos_neg\",  ~\"&lt;8\", ~\"8-10\", ~\"&gt;10\",\n  \"Negative\", 95, 23, 45,\n  \"Positive\", 49, 22, 25,\n  )\n\n\ntbl %&gt;% \n  janitor::adorn_totals(where = c(\"row\", \"col\")) %&gt;%\n  kable(\n    longtable = TRUE,\n    booktabs = TRUE,\n    linesep = \"\",\n    align = c(\"l\", \"c\", \"c\", \"c\", \"c\"),\n    col.names = c(\"\", names(.)[-1]),\n  ) %&gt;%\n  add_header_above(c(\" \" = 1, \"Inoculum volume (mL)\" = 3, \" \" = 1), bold = TRUE) %&gt;%\n  row_spec(0, bold = TRUE) %&gt;%\n  column_spec(1, bold = TRUE) %&gt;%\n  column_spec(2:4, width = \"3em\")\n\n\n\nTable 1: Test\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nInoculum volume (mL)\n\n\n\n\n\n&lt;8\n8-10\n&gt;10\nTotal\n\n\n\n\nNegative\n95\n23\n45\n163\n\n\nPositive\n49\n22\n25\n96\n\n\nTotal\n144\n45\n70\n259"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "index.html#example-table",
    "href": "index.html#example-table",
    "title": "Statistical Learning Lecture Notes",
    "section": "",
    "text": "library(tidyverse)\nlibrary(kableExtra)\n\ntbl &lt;- tribble(\n  ~\"pos_neg\",  ~\"&lt;8\", ~\"8-10\", ~\"&gt;10\",\n  \"Negative\", 95, 23, 45,\n  \"Positive\", 49, 22, 25,\n  )\n\n\ntbl %&gt;% \n  janitor::adorn_totals(where = c(\"row\", \"col\")) %&gt;%\n  kable(\n    longtable = TRUE,\n    booktabs = TRUE,\n    linesep = \"\",\n    align = c(\"l\", \"c\", \"c\", \"c\", \"c\"),\n    col.names = c(\"\", names(.)[-1]),\n  ) %&gt;%\n  add_header_above(c(\" \" = 1, \"Inoculum volume (mL)\" = 3, \" \" = 1), bold = TRUE) %&gt;%\n  row_spec(0, bold = TRUE) %&gt;%\n  column_spec(1, bold = TRUE) %&gt;%\n  column_spec(2:4, width = \"3em\")\n\n\n\nTable 1: Test\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nInoculum volume (mL)\n\n\n\n\n\n&lt;8\n8-10\n&gt;10\nTotal\n\n\n\n\nNegative\n95\n23\n45\n163\n\n\nPositive\n49\n22\n25\n96\n\n\nTotal\n144\n45\n70\n259"
  },
  {
    "objectID": "M1/M1LN1.html",
    "href": "M1/M1LN1.html",
    "title": "Data Partitioning and Feature Engineering",
    "section": "",
    "text": "The dplyr package is used for data manipulation and the ggplot2 package is used for data visualization. These are frequently used packages in machine learning and have a rich code library available on their website.\n\n# Helper packages\nlibrary(dplyr)     # for data manipulation\nlibrary(ggplot2)   # for awesome graphics\nlibrary(gt)\n\n\n\n\nlibrary(rsample)  # for resampling procedures\nlibrary(caret)    # for resampling and model training\nlibrary(h2o)      # for resampling and model training\n\n\n\nH2O is a fully open-source, distributed in-memory machine-learning platform with linear scalability. H2O supports the most widely used statistical & machine learning algorithms including gradient-boosted machines, generalized linear models, deep learning and more. H2O also has an industry-leading AutoML functionality that automatically runs through all the algorithms and their hyperparameters to produce a leaderboard of the best models. The H2O platform is used by over 18,000 organizations globally and is extremely popular in both the R & Python communities.\n\n# h20 set up\n\nh2o.no_progress() # turn off h20\nh2o.init()        # launch h20\n\n\nH2O is not running yet, starting it now...\n\nNote:  In case of errors look at the following log files:\n    C:\\Users\\npadalka\\AppData\\Local\\Temp\\Rtmp8ua3N6\\file194c497b2744/h2o_npadalka_started_from_r.out\n    C:\\Users\\npadalka\\AppData\\Local\\Temp\\Rtmp8ua3N6\\file194ca8d6337/h2o_npadalka_started_from_r.err\n\n\nStarting H2O JVM and connecting: . Connection successful!\n\nR is connected to the H2O cluster: \n    H2O cluster uptime:         5 seconds 328 milliseconds \n    H2O cluster timezone:       America/New_York \n    H2O data parsing timezone:  UTC \n    H2O cluster version:        3.44.0.3 \n    H2O cluster version age:    1 year, 10 months and 14 days \n    H2O cluster name:           H2O_started_from_R_npadalka_wrb637 \n    H2O cluster total nodes:    1 \n    H2O cluster total memory:   7.90 GB \n    H2O cluster total cores:    12 \n    H2O cluster allowed cores:  12 \n    H2O cluster healthy:        TRUE \n    H2O Connection ip:          localhost \n    H2O Connection port:        54321 \n    H2O Connection proxy:       NA \n    H2O Internal Security:      FALSE \n    R Version:                  R version 4.5.0 (2025-04-11 ucrt) \n\n\nWarning in h2o.clusterInfo(): \nYour H2O cluster version is (1 year, 10 months and 14 days) old. There may be a newer version available.\nPlease download and install the latest version from: https://h2o-release.s3.amazonaws.com/h2o/latest_stable.html\n\n\n\n\n\n\nWe first need to load the dataset from csv. In real world scenario, this will be a database connection.\n\n# Read your dataset\names &lt;-read.csv(\"../data/AmesHousing2.csv\")\n# ames &lt;- AmesHousing::make_ames()\n\nwe need to convert the original dataset into an H20 object (to run the models)\n\names.h2o0 &lt;-as.h2o(ames)\n\nhead(ames$SalePrice)  # response variable\n\n[1] 171000 139000 159000 136000 230000 190000\n\ntarget &lt;- 'SalePrice'\npredictors &lt;- setdiff(colnames(ames), target)\n\nLet’s see what the data looks like by looking at the first few rows of the dataset.\n\nlibrary(kableExtra)\n\n\nAttaching package: 'kableExtra'\n\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n\nkable(head(ames), \"html\") %&gt;% kable_styling(\"striped\") %&gt;% scroll_box(width = \"100%\")\n\n\n\n\n\nOrder\nLot.Frontage\nLot.Area\nLot.Shape\nUtilities\nLot.Config\nLand.Slope\nNeighborhood\nBldg.Type\nHouse.Style\nOverall.Qual\nOverall.Cond\nYear.Built\nYear.Remod.Add\nFoundation\nBsmt.Unf.SF\nTotal.Bsmt.SF\nBaseLivArea\nCentral.Air\nX1st.Flr.SF\nX2nd.Flr.SF\nGr.Liv.Area\nFull.Bath\nHalf.Bath\nBathrooms\nBedroom.AbvGr\nKitchen.AbvGr\nKitchen.Qual\nTotRms.AbvGrd\nFireplaces\nGarage.Type\nGarage.Area\nWood.Deck.SF\nOpen.Porch.SF\nEnclosed.Porch\nX3Ssn.Porch\nScreen.Porch\nMo.Sold\nYr.Sold\nSale.Condition\nSalePrice\n\n\n\n\n117\n80\n9600\nReg\nAllPub\nInside\nGtl\nNWAmes\n1Fam\n2Story\n6\n6\n1971\n1971\nCBlock\n386\n715\n329\nY\n930\n715\n1645\n1\n2\n2\n4\n1\nTA\n7\n0\nAttchd\n441\n0\n78\n0\n0\n0\n6\n2010\nNormal\n171000\n\n\n325\n94\n9400\nReg\nAllPub\nCorner\nGtl\nMitchel\nDuplex\n2Story\n6\n5\n1971\n1971\nCBlock\n912\n912\n0\nY\n912\n912\n1824\n2\n2\n3\n4\n2\nTA\n8\n0\nNA\n0\n128\n0\n0\n0\n0\n4\n2010\nNormal\n139000\n\n\n337\n70\n7700\nReg\nAllPub\nInside\nGtl\nMitchel\nDuplex\n2Story\n5\n2\n1985\n1986\nPConc\n1216\n1216\n0\nY\n1216\n1216\n2432\n4\n2\n5\n4\n2\nTA\n10\n0\nAttchd\n616\n200\n0\n0\n0\n0\n2\n2010\nNormal\n159000\n\n\n393\n60\n9000\nReg\nAllPub\nFR2\nGtl\nNAmes\nDuplex\n2Story\n5\n5\n1974\n1974\nCBlock\n896\n896\n0\nY\n896\n896\n1792\n2\n2\n3\n4\n2\nTA\n8\n0\nNA\n0\n32\n45\n0\n0\n0\n9\n2009\nNormal\n136000\n\n\n590\nNA\n13774\nIR1\nAllPub\nInside\nGtl\nNWAmes\n1Fam\n2Story\n7\n7\n1977\n1992\nPConc\n476\n908\n432\nY\n1316\n972\n2288\n1\n2\n2\n4\n1\nGd\n8\n2\nAttchd\n520\n321\n72\n0\n0\n156\n11\n2009\nNormal\n230000\n\n\n667\n81\n9671\nReg\nAllPub\nCorner\nGtl\nNAmes\nDuplex\n2Story\n6\n5\n1969\n1969\nCBlock\n1248\n1248\n0\nY\n1248\n1296\n2544\n2\n2\n3\n6\n2\nTA\n12\n0\nAttchd\n907\n0\n0\n0\n0\n0\n8\n2009\nNormal\n190000\n\n\n\n\n\n# head(ames)\n\nNow let the summary of the dataset\n\nlibrary(gtsummary)\nsummary(ames)\n\n     Order         Lot.Frontage       Lot.Area       Lot.Shape        \n Min.   :   1.0   Min.   : 21.00   Min.   :  1300   Length:2930       \n 1st Qu.: 733.2   1st Qu.: 58.00   1st Qu.:  7440   Class :character  \n Median :1465.5   Median : 68.00   Median :  9436   Mode  :character  \n Mean   :1465.5   Mean   : 69.22   Mean   : 10148                     \n 3rd Qu.:2197.8   3rd Qu.: 80.00   3rd Qu.: 11555                     \n Max.   :2930.0   Max.   :313.00   Max.   :215245                     \n                  NA's   :490                                         \n  Utilities          Lot.Config         Land.Slope        Neighborhood      \n Length:2930        Length:2930        Length:2930        Length:2930       \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n  Bldg.Type         House.Style         Overall.Qual     Overall.Cond  \n Length:2930        Length:2930        Min.   : 1.000   Min.   :1.000  \n Class :character   Class :character   1st Qu.: 5.000   1st Qu.:5.000  \n Mode  :character   Mode  :character   Median : 6.000   Median :5.000  \n                                       Mean   : 6.095   Mean   :5.563  \n                                       3rd Qu.: 7.000   3rd Qu.:6.000  \n                                       Max.   :10.000   Max.   :9.000  \n                                                                       \n   Year.Built   Year.Remod.Add  Foundation         Bsmt.Unf.SF    \n Min.   :1872   Min.   :1950   Length:2930        Min.   :   0.0  \n 1st Qu.:1954   1st Qu.:1965   Class :character   1st Qu.: 219.0  \n Median :1973   Median :1993   Mode  :character   Median : 466.0  \n Mean   :1971   Mean   :1984                      Mean   : 559.3  \n 3rd Qu.:2001   3rd Qu.:2004                      3rd Qu.: 802.0  \n Max.   :2010   Max.   :2010                      Max.   :2336.0  \n                                                  NA's   :1       \n Total.Bsmt.SF   BaseLivArea     Central.Air         X1st.Flr.SF    \n Min.   :   0   Min.   :   0.0   Length:2930        Min.   : 334.0  \n 1st Qu.: 793   1st Qu.:   0.0   Class :character   1st Qu.: 876.2  \n Median : 990   Median : 459.5   Mode  :character   Median :1084.0  \n Mean   :1052   Mean   : 492.2                      Mean   :1159.6  \n 3rd Qu.:1302   3rd Qu.: 808.0                      3rd Qu.:1384.0  \n Max.   :6110   Max.   :5644.0                      Max.   :5095.0  \n NA's   :1                                                          \n  X2nd.Flr.SF      Gr.Liv.Area     Full.Bath       Half.Bath     \n Min.   :   0.0   Min.   : 334   Min.   :0.000   Min.   :0.0000  \n 1st Qu.:   0.0   1st Qu.:1126   1st Qu.:1.000   1st Qu.:0.0000  \n Median :   0.0   Median :1442   Median :2.000   Median :0.0000  \n Mean   : 335.5   Mean   :1500   Mean   :1.567   Mean   :0.3795  \n 3rd Qu.: 703.8   3rd Qu.:1743   3rd Qu.:2.000   3rd Qu.:1.0000  \n Max.   :2065.0   Max.   :5642   Max.   :4.000   Max.   :2.0000  \n                                                                 \n   Bathrooms     Bedroom.AbvGr   Kitchen.AbvGr   Kitchen.Qual      \n Min.   :0.000   Min.   :0.000   Min.   :0.000   Length:2930       \n 1st Qu.:1.000   1st Qu.:2.000   1st Qu.:1.000   Class :character  \n Median :2.000   Median :3.000   Median :1.000   Mode  :character  \n Mean   :1.756   Mean   :2.854   Mean   :1.044                     \n 3rd Qu.:2.500   3rd Qu.:3.000   3rd Qu.:1.000                     \n Max.   :5.000   Max.   :8.000   Max.   :3.000                     \n                                                                   \n TotRms.AbvGrd      Fireplaces     Garage.Type         Garage.Area    \n Min.   : 2.000   Min.   :0.0000   Length:2930        Min.   :   0.0  \n 1st Qu.: 5.000   1st Qu.:0.0000   Class :character   1st Qu.: 320.0  \n Median : 6.000   Median :1.0000   Mode  :character   Median : 480.0  \n Mean   : 6.443   Mean   :0.5993                      Mean   : 472.8  \n 3rd Qu.: 7.000   3rd Qu.:1.0000                      3rd Qu.: 576.0  \n Max.   :15.000   Max.   :4.0000                      Max.   :1488.0  \n                                                      NA's   :1       \n  Wood.Deck.SF     Open.Porch.SF    Enclosed.Porch     X3Ssn.Porch     \n Min.   :   0.00   Min.   :  0.00   Min.   :   0.00   Min.   :  0.000  \n 1st Qu.:   0.00   1st Qu.:  0.00   1st Qu.:   0.00   1st Qu.:  0.000  \n Median :   0.00   Median : 27.00   Median :   0.00   Median :  0.000  \n Mean   :  93.75   Mean   : 47.53   Mean   :  23.01   Mean   :  2.592  \n 3rd Qu.: 168.00   3rd Qu.: 70.00   3rd Qu.:   0.00   3rd Qu.:  0.000  \n Max.   :1424.00   Max.   :742.00   Max.   :1012.00   Max.   :508.000  \n                                                                       \n  Screen.Porch    Mo.Sold          Yr.Sold     Sale.Condition    \n Min.   :  0   Min.   : 1.000   Min.   :2006   Length:2930       \n 1st Qu.:  0   1st Qu.: 4.000   1st Qu.:2007   Class :character  \n Median :  0   Median : 6.000   Median :2008   Mode  :character  \n Mean   : 16   Mean   : 6.216   Mean   :2008                     \n 3rd Qu.:  0   3rd Qu.: 8.000   3rd Qu.:2009                     \n Max.   :576   Max.   :12.000   Max.   :2010                     \n                                                                 \n   SalePrice     \n Min.   : 12789  \n 1st Qu.:129500  \n Median :160000  \n Mean   :180796  \n 3rd Qu.:213500  \n Max.   :755000  \n                 \n\n\nLet’s see a better table for the summary\n\n ames %&gt;% \n gtsummary::tbl_summary(\n  ) %&gt;% \n  gtsummary::bold_labels() %&gt;% \n  gtsummary::as_kable_extra(\n    format = \"html\",\n    longtable = TRUE,\n    linesep = \"\"\n    ) %&gt;%\n  kableExtra::kable_styling(\n      position = \"left\",\n      latex_options = c(\"striped\", \"repeat_header\"),\n      stripe_color = \"gray!15\"\n    )\n\n\n\n\nCharacteristic\nN = 2,930\n\n\n\n\nOrder\n1,466 (733, 2,198)\n\n\nLot.Frontage\n68 (58, 80)\n\n\nUnknown\n490\n\n\nLot.Area\n9,437 (7,440, 11,556)\n\n\nLot.Shape\n\n\n\nIR1\n979 (33%)\n\n\nIR2\n76 (2.6%)\n\n\nIR3\n16 (0.5%)\n\n\nReg\n1,859 (63%)\n\n\nUtilities\n\n\n\nAllPub\n2,927 (100%)\n\n\nNoSeWa\n1 (&lt;0.1%)\n\n\nNoSewr\n2 (&lt;0.1%)\n\n\nLot.Config\n\n\n\nCorner\n511 (17%)\n\n\nCulDSac\n180 (6.1%)\n\n\nFR2\n85 (2.9%)\n\n\nFR3\n14 (0.5%)\n\n\nInside\n2,140 (73%)\n\n\nLand.Slope\n\n\n\nGtl\n2,789 (95%)\n\n\nMod\n125 (4.3%)\n\n\nSev\n16 (0.5%)\n\n\nNeighborhood\n\n\n\nBlmngtn\n28 (1.0%)\n\n\nBlueste\n10 (0.3%)\n\n\nBrDale\n30 (1.0%)\n\n\nBrkSide\n108 (3.7%)\n\n\nClearCr\n44 (1.5%)\n\n\nCollgCr\n267 (9.1%)\n\n\nCrawfor\n103 (3.5%)\n\n\nEdwards\n194 (6.6%)\n\n\nGilbert\n165 (5.6%)\n\n\nGreens\n8 (0.3%)\n\n\nGrnHill\n2 (&lt;0.1%)\n\n\nIDOTRR\n93 (3.2%)\n\n\nLandmrk\n1 (&lt;0.1%)\n\n\nMeadowV\n37 (1.3%)\n\n\nMitchel\n114 (3.9%)\n\n\nNAmes\n443 (15%)\n\n\nNoRidge\n71 (2.4%)\n\n\nNPkVill\n23 (0.8%)\n\n\nNridgHt\n166 (5.7%)\n\n\nNWAmes\n131 (4.5%)\n\n\nOldTown\n239 (8.2%)\n\n\nSawyer\n151 (5.2%)\n\n\nSawyerW\n125 (4.3%)\n\n\nSomerst\n182 (6.2%)\n\n\nStoneBr\n51 (1.7%)\n\n\nSWISU\n48 (1.6%)\n\n\nTimber\n72 (2.5%)\n\n\nVeenker\n24 (0.8%)\n\n\nBldg.Type\n\n\n\n1Fam\n2,425 (83%)\n\n\n2fmCon\n62 (2.1%)\n\n\nDuplex\n109 (3.7%)\n\n\nTwnhs\n101 (3.4%)\n\n\nTwnhsE\n233 (8.0%)\n\n\nHouse.Style\n\n\n\n1.5Fin\n314 (11%)\n\n\n1.5Unf\n19 (0.6%)\n\n\n1Story\n1,481 (51%)\n\n\n2.5Fin\n8 (0.3%)\n\n\n2.5Unf\n24 (0.8%)\n\n\n2Story\n873 (30%)\n\n\nSFoyer\n83 (2.8%)\n\n\nSLvl\n128 (4.4%)\n\n\nOverall.Qual\n6 (5, 7)\n\n\nOverall.Cond\n\n\n\n1\n7 (0.2%)\n\n\n2\n10 (0.3%)\n\n\n3\n50 (1.7%)\n\n\n4\n101 (3.4%)\n\n\n5\n1,654 (56%)\n\n\n6\n533 (18%)\n\n\n7\n390 (13%)\n\n\n8\n144 (4.9%)\n\n\n9\n41 (1.4%)\n\n\nYear.Built\n1,973 (1,954, 2,001)\n\n\nYear.Remod.Add\n1,993 (1,965, 2,004)\n\n\nFoundation\n\n\n\nBrkTil\n311 (11%)\n\n\nCBlock\n1,244 (42%)\n\n\nPConc\n1,310 (45%)\n\n\nSlab\n49 (1.7%)\n\n\nStone\n11 (0.4%)\n\n\nWood\n5 (0.2%)\n\n\nBsmt.Unf.SF\n466 (219, 802)\n\n\nUnknown\n1\n\n\nTotal.Bsmt.SF\n990 (793, 1,302)\n\n\nUnknown\n1\n\n\nBaseLivArea\n460 (0, 808)\n\n\nCentral.Air\n\n\n\nN\n196 (6.7%)\n\n\nY\n2,734 (93%)\n\n\nX1st.Flr.SF\n1,084 (876, 1,384)\n\n\nX2nd.Flr.SF\n0 (0, 704)\n\n\nGr.Liv.Area\n1,442 (1,126, 1,743)\n\n\nFull.Bath\n\n\n\n0\n12 (0.4%)\n\n\n1\n1,318 (45%)\n\n\n2\n1,532 (52%)\n\n\n3\n64 (2.2%)\n\n\n4\n4 (0.1%)\n\n\nHalf.Bath\n\n\n\n0\n1,843 (63%)\n\n\n1\n1,062 (36%)\n\n\n2\n25 (0.9%)\n\n\nBathrooms\n2.00 (1.00, 2.50)\n\n\nBedroom.AbvGr\n\n\n\n0\n8 (0.3%)\n\n\n1\n112 (3.8%)\n\n\n2\n743 (25%)\n\n\n3\n1,597 (55%)\n\n\n4\n400 (14%)\n\n\n5\n48 (1.6%)\n\n\n6\n21 (0.7%)\n\n\n8\n1 (&lt;0.1%)\n\n\nKitchen.AbvGr\n\n\n\n0\n3 (0.1%)\n\n\n1\n2,796 (95%)\n\n\n2\n129 (4.4%)\n\n\n3\n2 (&lt;0.1%)\n\n\nKitchen.Qual\n\n\n\nEx\n205 (7.0%)\n\n\nFa\n70 (2.4%)\n\n\nGd\n1,160 (40%)\n\n\nPo\n1 (&lt;0.1%)\n\n\nTA\n1,494 (51%)\n\n\nTotRms.AbvGrd\n6 (5, 7)\n\n\nFireplaces\n\n\n\n0\n1,422 (49%)\n\n\n1\n1,274 (43%)\n\n\n2\n221 (7.5%)\n\n\n3\n12 (0.4%)\n\n\n4\n1 (&lt;0.1%)\n\n\nGarage.Type\n\n\n\n2Types\n23 (0.8%)\n\n\nAttchd\n1,731 (62%)\n\n\nBasment\n36 (1.3%)\n\n\nBuiltIn\n186 (6.7%)\n\n\nCarPort\n15 (0.5%)\n\n\nDetchd\n782 (28%)\n\n\nUnknown\n157\n\n\nGarage.Area\n480 (320, 576)\n\n\nUnknown\n1\n\n\nWood.Deck.SF\n0 (0, 168)\n\n\nOpen.Porch.SF\n27 (0, 70)\n\n\nEnclosed.Porch\n0 (0, 0)\n\n\nX3Ssn.Porch\n0 (0, 0)\n\n\nScreen.Porch\n0 (0, 0)\n\n\nMo.Sold\n6 (4, 8)\n\n\nYr.Sold\n\n\n\n2006\n625 (21%)\n\n\n2007\n694 (24%)\n\n\n2008\n622 (21%)\n\n\n2009\n648 (22%)\n\n\n2010\n341 (12%)\n\n\nSale.Condition\n\n\n\nAbnorml\n190 (6.5%)\n\n\nAdjLand\n12 (0.4%)\n\n\nAlloca\n24 (0.8%)\n\n\nFamily\n46 (1.6%)\n\n\nNormal\n2,413 (82%)\n\n\nPartial\n245 (8.4%)\n\n\nSalePrice\n160,000 (129,500, 213,500)\n\n\n\n1 Median (Q1, Q3); n (%)\n\n\n\n\n\n\n\n\n\n\nThe dataset contains both numeric and categorical variables. We need to separate them for further analysis. This is especially important for feature engineering.\n\nnum_vars&lt;-colnames(ames[sapply(ames, is.numeric) == TRUE])\ncat_vars&lt;-colnames(ames[sapply(ames, is.character) == TRUE])\n\n\n\n\nThere are two ways we can use the variables from the r code in the text. The first one is by using stmt output using print and the other is using r output.\n\n\n\nstmt &lt;- paste(\"There are\", length(num_vars), \"numerical features and\", length(cat_vars), \"categorical features\" )\nprint(stmt, na.print = NULL)\n\n[1] \"There are 29 numerical features and 12 categorical features\"\n\n\n\n\n\nThere are 29 numerical features and 12 categorical features in this dataset."
  },
  {
    "objectID": "M1/M1LN1.html#modeling-process-packages",
    "href": "M1/M1LN1.html#modeling-process-packages",
    "title": "Data Partitioning and Feature Engineering",
    "section": "",
    "text": "library(rsample)  # for resampling procedures\nlibrary(caret)    # for resampling and model training\nlibrary(h2o)      # for resampling and model training\n\n\n\nH2O is a fully open-source, distributed in-memory machine-learning platform with linear scalability. H2O supports the most widely used statistical & machine learning algorithms including gradient-boosted machines, generalized linear models, deep learning and more. H2O also has an industry-leading AutoML functionality that automatically runs through all the algorithms and their hyperparameters to produce a leaderboard of the best models. The H2O platform is used by over 18,000 organizations globally and is extremely popular in both the R & Python communities.\n\n# h20 set up\n\nh2o.no_progress() # turn off h20\nh2o.init()        # launch h20\n\n\nH2O is not running yet, starting it now...\n\nNote:  In case of errors look at the following log files:\n    C:\\Users\\npadalka\\AppData\\Local\\Temp\\Rtmp8ua3N6\\file194c497b2744/h2o_npadalka_started_from_r.out\n    C:\\Users\\npadalka\\AppData\\Local\\Temp\\Rtmp8ua3N6\\file194ca8d6337/h2o_npadalka_started_from_r.err\n\n\nStarting H2O JVM and connecting: . Connection successful!\n\nR is connected to the H2O cluster: \n    H2O cluster uptime:         5 seconds 328 milliseconds \n    H2O cluster timezone:       America/New_York \n    H2O data parsing timezone:  UTC \n    H2O cluster version:        3.44.0.3 \n    H2O cluster version age:    1 year, 10 months and 14 days \n    H2O cluster name:           H2O_started_from_R_npadalka_wrb637 \n    H2O cluster total nodes:    1 \n    H2O cluster total memory:   7.90 GB \n    H2O cluster total cores:    12 \n    H2O cluster allowed cores:  12 \n    H2O cluster healthy:        TRUE \n    H2O Connection ip:          localhost \n    H2O Connection port:        54321 \n    H2O Connection proxy:       NA \n    H2O Internal Security:      FALSE \n    R Version:                  R version 4.5.0 (2025-04-11 ucrt) \n\n\nWarning in h2o.clusterInfo(): \nYour H2O cluster version is (1 year, 10 months and 14 days) old. There may be a newer version available.\nPlease download and install the latest version from: https://h2o-release.s3.amazonaws.com/h2o/latest_stable.html"
  },
  {
    "objectID": "M1/M1LN1.html#loading-and-importing-data",
    "href": "M1/M1LN1.html#loading-and-importing-data",
    "title": "Data Partitioning and Feature Engineering",
    "section": "",
    "text": "We first need to load the dataset from csv. In real world scenario, this will be a database connection.\n\n# Read your dataset\names &lt;-read.csv(\"../data/AmesHousing2.csv\")\n# ames &lt;- AmesHousing::make_ames()\n\nwe need to convert the original dataset into an H20 object (to run the models)\n\names.h2o0 &lt;-as.h2o(ames)\n\nhead(ames$SalePrice)  # response variable\n\n[1] 171000 139000 159000 136000 230000 190000\n\ntarget &lt;- 'SalePrice'\npredictors &lt;- setdiff(colnames(ames), target)\n\nLet’s see what the data looks like by looking at the first few rows of the dataset.\n\nlibrary(kableExtra)\n\n\nAttaching package: 'kableExtra'\n\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n\nkable(head(ames), \"html\") %&gt;% kable_styling(\"striped\") %&gt;% scroll_box(width = \"100%\")\n\n\n\n\n\nOrder\nLot.Frontage\nLot.Area\nLot.Shape\nUtilities\nLot.Config\nLand.Slope\nNeighborhood\nBldg.Type\nHouse.Style\nOverall.Qual\nOverall.Cond\nYear.Built\nYear.Remod.Add\nFoundation\nBsmt.Unf.SF\nTotal.Bsmt.SF\nBaseLivArea\nCentral.Air\nX1st.Flr.SF\nX2nd.Flr.SF\nGr.Liv.Area\nFull.Bath\nHalf.Bath\nBathrooms\nBedroom.AbvGr\nKitchen.AbvGr\nKitchen.Qual\nTotRms.AbvGrd\nFireplaces\nGarage.Type\nGarage.Area\nWood.Deck.SF\nOpen.Porch.SF\nEnclosed.Porch\nX3Ssn.Porch\nScreen.Porch\nMo.Sold\nYr.Sold\nSale.Condition\nSalePrice\n\n\n\n\n117\n80\n9600\nReg\nAllPub\nInside\nGtl\nNWAmes\n1Fam\n2Story\n6\n6\n1971\n1971\nCBlock\n386\n715\n329\nY\n930\n715\n1645\n1\n2\n2\n4\n1\nTA\n7\n0\nAttchd\n441\n0\n78\n0\n0\n0\n6\n2010\nNormal\n171000\n\n\n325\n94\n9400\nReg\nAllPub\nCorner\nGtl\nMitchel\nDuplex\n2Story\n6\n5\n1971\n1971\nCBlock\n912\n912\n0\nY\n912\n912\n1824\n2\n2\n3\n4\n2\nTA\n8\n0\nNA\n0\n128\n0\n0\n0\n0\n4\n2010\nNormal\n139000\n\n\n337\n70\n7700\nReg\nAllPub\nInside\nGtl\nMitchel\nDuplex\n2Story\n5\n2\n1985\n1986\nPConc\n1216\n1216\n0\nY\n1216\n1216\n2432\n4\n2\n5\n4\n2\nTA\n10\n0\nAttchd\n616\n200\n0\n0\n0\n0\n2\n2010\nNormal\n159000\n\n\n393\n60\n9000\nReg\nAllPub\nFR2\nGtl\nNAmes\nDuplex\n2Story\n5\n5\n1974\n1974\nCBlock\n896\n896\n0\nY\n896\n896\n1792\n2\n2\n3\n4\n2\nTA\n8\n0\nNA\n0\n32\n45\n0\n0\n0\n9\n2009\nNormal\n136000\n\n\n590\nNA\n13774\nIR1\nAllPub\nInside\nGtl\nNWAmes\n1Fam\n2Story\n7\n7\n1977\n1992\nPConc\n476\n908\n432\nY\n1316\n972\n2288\n1\n2\n2\n4\n1\nGd\n8\n2\nAttchd\n520\n321\n72\n0\n0\n156\n11\n2009\nNormal\n230000\n\n\n667\n81\n9671\nReg\nAllPub\nCorner\nGtl\nNAmes\nDuplex\n2Story\n6\n5\n1969\n1969\nCBlock\n1248\n1248\n0\nY\n1248\n1296\n2544\n2\n2\n3\n6\n2\nTA\n12\n0\nAttchd\n907\n0\n0\n0\n0\n0\n8\n2009\nNormal\n190000\n\n\n\n\n\n# head(ames)\n\nNow let the summary of the dataset\n\nlibrary(gtsummary)\nsummary(ames)\n\n     Order         Lot.Frontage       Lot.Area       Lot.Shape        \n Min.   :   1.0   Min.   : 21.00   Min.   :  1300   Length:2930       \n 1st Qu.: 733.2   1st Qu.: 58.00   1st Qu.:  7440   Class :character  \n Median :1465.5   Median : 68.00   Median :  9436   Mode  :character  \n Mean   :1465.5   Mean   : 69.22   Mean   : 10148                     \n 3rd Qu.:2197.8   3rd Qu.: 80.00   3rd Qu.: 11555                     \n Max.   :2930.0   Max.   :313.00   Max.   :215245                     \n                  NA's   :490                                         \n  Utilities          Lot.Config         Land.Slope        Neighborhood      \n Length:2930        Length:2930        Length:2930        Length:2930       \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n  Bldg.Type         House.Style         Overall.Qual     Overall.Cond  \n Length:2930        Length:2930        Min.   : 1.000   Min.   :1.000  \n Class :character   Class :character   1st Qu.: 5.000   1st Qu.:5.000  \n Mode  :character   Mode  :character   Median : 6.000   Median :5.000  \n                                       Mean   : 6.095   Mean   :5.563  \n                                       3rd Qu.: 7.000   3rd Qu.:6.000  \n                                       Max.   :10.000   Max.   :9.000  \n                                                                       \n   Year.Built   Year.Remod.Add  Foundation         Bsmt.Unf.SF    \n Min.   :1872   Min.   :1950   Length:2930        Min.   :   0.0  \n 1st Qu.:1954   1st Qu.:1965   Class :character   1st Qu.: 219.0  \n Median :1973   Median :1993   Mode  :character   Median : 466.0  \n Mean   :1971   Mean   :1984                      Mean   : 559.3  \n 3rd Qu.:2001   3rd Qu.:2004                      3rd Qu.: 802.0  \n Max.   :2010   Max.   :2010                      Max.   :2336.0  \n                                                  NA's   :1       \n Total.Bsmt.SF   BaseLivArea     Central.Air         X1st.Flr.SF    \n Min.   :   0   Min.   :   0.0   Length:2930        Min.   : 334.0  \n 1st Qu.: 793   1st Qu.:   0.0   Class :character   1st Qu.: 876.2  \n Median : 990   Median : 459.5   Mode  :character   Median :1084.0  \n Mean   :1052   Mean   : 492.2                      Mean   :1159.6  \n 3rd Qu.:1302   3rd Qu.: 808.0                      3rd Qu.:1384.0  \n Max.   :6110   Max.   :5644.0                      Max.   :5095.0  \n NA's   :1                                                          \n  X2nd.Flr.SF      Gr.Liv.Area     Full.Bath       Half.Bath     \n Min.   :   0.0   Min.   : 334   Min.   :0.000   Min.   :0.0000  \n 1st Qu.:   0.0   1st Qu.:1126   1st Qu.:1.000   1st Qu.:0.0000  \n Median :   0.0   Median :1442   Median :2.000   Median :0.0000  \n Mean   : 335.5   Mean   :1500   Mean   :1.567   Mean   :0.3795  \n 3rd Qu.: 703.8   3rd Qu.:1743   3rd Qu.:2.000   3rd Qu.:1.0000  \n Max.   :2065.0   Max.   :5642   Max.   :4.000   Max.   :2.0000  \n                                                                 \n   Bathrooms     Bedroom.AbvGr   Kitchen.AbvGr   Kitchen.Qual      \n Min.   :0.000   Min.   :0.000   Min.   :0.000   Length:2930       \n 1st Qu.:1.000   1st Qu.:2.000   1st Qu.:1.000   Class :character  \n Median :2.000   Median :3.000   Median :1.000   Mode  :character  \n Mean   :1.756   Mean   :2.854   Mean   :1.044                     \n 3rd Qu.:2.500   3rd Qu.:3.000   3rd Qu.:1.000                     \n Max.   :5.000   Max.   :8.000   Max.   :3.000                     \n                                                                   \n TotRms.AbvGrd      Fireplaces     Garage.Type         Garage.Area    \n Min.   : 2.000   Min.   :0.0000   Length:2930        Min.   :   0.0  \n 1st Qu.: 5.000   1st Qu.:0.0000   Class :character   1st Qu.: 320.0  \n Median : 6.000   Median :1.0000   Mode  :character   Median : 480.0  \n Mean   : 6.443   Mean   :0.5993                      Mean   : 472.8  \n 3rd Qu.: 7.000   3rd Qu.:1.0000                      3rd Qu.: 576.0  \n Max.   :15.000   Max.   :4.0000                      Max.   :1488.0  \n                                                      NA's   :1       \n  Wood.Deck.SF     Open.Porch.SF    Enclosed.Porch     X3Ssn.Porch     \n Min.   :   0.00   Min.   :  0.00   Min.   :   0.00   Min.   :  0.000  \n 1st Qu.:   0.00   1st Qu.:  0.00   1st Qu.:   0.00   1st Qu.:  0.000  \n Median :   0.00   Median : 27.00   Median :   0.00   Median :  0.000  \n Mean   :  93.75   Mean   : 47.53   Mean   :  23.01   Mean   :  2.592  \n 3rd Qu.: 168.00   3rd Qu.: 70.00   3rd Qu.:   0.00   3rd Qu.:  0.000  \n Max.   :1424.00   Max.   :742.00   Max.   :1012.00   Max.   :508.000  \n                                                                       \n  Screen.Porch    Mo.Sold          Yr.Sold     Sale.Condition    \n Min.   :  0   Min.   : 1.000   Min.   :2006   Length:2930       \n 1st Qu.:  0   1st Qu.: 4.000   1st Qu.:2007   Class :character  \n Median :  0   Median : 6.000   Median :2008   Mode  :character  \n Mean   : 16   Mean   : 6.216   Mean   :2008                     \n 3rd Qu.:  0   3rd Qu.: 8.000   3rd Qu.:2009                     \n Max.   :576   Max.   :12.000   Max.   :2010                     \n                                                                 \n   SalePrice     \n Min.   : 12789  \n 1st Qu.:129500  \n Median :160000  \n Mean   :180796  \n 3rd Qu.:213500  \n Max.   :755000  \n                 \n\n\nLet’s see a better table for the summary\n\n ames %&gt;% \n gtsummary::tbl_summary(\n  ) %&gt;% \n  gtsummary::bold_labels() %&gt;% \n  gtsummary::as_kable_extra(\n    format = \"html\",\n    longtable = TRUE,\n    linesep = \"\"\n    ) %&gt;%\n  kableExtra::kable_styling(\n      position = \"left\",\n      latex_options = c(\"striped\", \"repeat_header\"),\n      stripe_color = \"gray!15\"\n    )\n\n\n\n\nCharacteristic\nN = 2,930\n\n\n\n\nOrder\n1,466 (733, 2,198)\n\n\nLot.Frontage\n68 (58, 80)\n\n\nUnknown\n490\n\n\nLot.Area\n9,437 (7,440, 11,556)\n\n\nLot.Shape\n\n\n\nIR1\n979 (33%)\n\n\nIR2\n76 (2.6%)\n\n\nIR3\n16 (0.5%)\n\n\nReg\n1,859 (63%)\n\n\nUtilities\n\n\n\nAllPub\n2,927 (100%)\n\n\nNoSeWa\n1 (&lt;0.1%)\n\n\nNoSewr\n2 (&lt;0.1%)\n\n\nLot.Config\n\n\n\nCorner\n511 (17%)\n\n\nCulDSac\n180 (6.1%)\n\n\nFR2\n85 (2.9%)\n\n\nFR3\n14 (0.5%)\n\n\nInside\n2,140 (73%)\n\n\nLand.Slope\n\n\n\nGtl\n2,789 (95%)\n\n\nMod\n125 (4.3%)\n\n\nSev\n16 (0.5%)\n\n\nNeighborhood\n\n\n\nBlmngtn\n28 (1.0%)\n\n\nBlueste\n10 (0.3%)\n\n\nBrDale\n30 (1.0%)\n\n\nBrkSide\n108 (3.7%)\n\n\nClearCr\n44 (1.5%)\n\n\nCollgCr\n267 (9.1%)\n\n\nCrawfor\n103 (3.5%)\n\n\nEdwards\n194 (6.6%)\n\n\nGilbert\n165 (5.6%)\n\n\nGreens\n8 (0.3%)\n\n\nGrnHill\n2 (&lt;0.1%)\n\n\nIDOTRR\n93 (3.2%)\n\n\nLandmrk\n1 (&lt;0.1%)\n\n\nMeadowV\n37 (1.3%)\n\n\nMitchel\n114 (3.9%)\n\n\nNAmes\n443 (15%)\n\n\nNoRidge\n71 (2.4%)\n\n\nNPkVill\n23 (0.8%)\n\n\nNridgHt\n166 (5.7%)\n\n\nNWAmes\n131 (4.5%)\n\n\nOldTown\n239 (8.2%)\n\n\nSawyer\n151 (5.2%)\n\n\nSawyerW\n125 (4.3%)\n\n\nSomerst\n182 (6.2%)\n\n\nStoneBr\n51 (1.7%)\n\n\nSWISU\n48 (1.6%)\n\n\nTimber\n72 (2.5%)\n\n\nVeenker\n24 (0.8%)\n\n\nBldg.Type\n\n\n\n1Fam\n2,425 (83%)\n\n\n2fmCon\n62 (2.1%)\n\n\nDuplex\n109 (3.7%)\n\n\nTwnhs\n101 (3.4%)\n\n\nTwnhsE\n233 (8.0%)\n\n\nHouse.Style\n\n\n\n1.5Fin\n314 (11%)\n\n\n1.5Unf\n19 (0.6%)\n\n\n1Story\n1,481 (51%)\n\n\n2.5Fin\n8 (0.3%)\n\n\n2.5Unf\n24 (0.8%)\n\n\n2Story\n873 (30%)\n\n\nSFoyer\n83 (2.8%)\n\n\nSLvl\n128 (4.4%)\n\n\nOverall.Qual\n6 (5, 7)\n\n\nOverall.Cond\n\n\n\n1\n7 (0.2%)\n\n\n2\n10 (0.3%)\n\n\n3\n50 (1.7%)\n\n\n4\n101 (3.4%)\n\n\n5\n1,654 (56%)\n\n\n6\n533 (18%)\n\n\n7\n390 (13%)\n\n\n8\n144 (4.9%)\n\n\n9\n41 (1.4%)\n\n\nYear.Built\n1,973 (1,954, 2,001)\n\n\nYear.Remod.Add\n1,993 (1,965, 2,004)\n\n\nFoundation\n\n\n\nBrkTil\n311 (11%)\n\n\nCBlock\n1,244 (42%)\n\n\nPConc\n1,310 (45%)\n\n\nSlab\n49 (1.7%)\n\n\nStone\n11 (0.4%)\n\n\nWood\n5 (0.2%)\n\n\nBsmt.Unf.SF\n466 (219, 802)\n\n\nUnknown\n1\n\n\nTotal.Bsmt.SF\n990 (793, 1,302)\n\n\nUnknown\n1\n\n\nBaseLivArea\n460 (0, 808)\n\n\nCentral.Air\n\n\n\nN\n196 (6.7%)\n\n\nY\n2,734 (93%)\n\n\nX1st.Flr.SF\n1,084 (876, 1,384)\n\n\nX2nd.Flr.SF\n0 (0, 704)\n\n\nGr.Liv.Area\n1,442 (1,126, 1,743)\n\n\nFull.Bath\n\n\n\n0\n12 (0.4%)\n\n\n1\n1,318 (45%)\n\n\n2\n1,532 (52%)\n\n\n3\n64 (2.2%)\n\n\n4\n4 (0.1%)\n\n\nHalf.Bath\n\n\n\n0\n1,843 (63%)\n\n\n1\n1,062 (36%)\n\n\n2\n25 (0.9%)\n\n\nBathrooms\n2.00 (1.00, 2.50)\n\n\nBedroom.AbvGr\n\n\n\n0\n8 (0.3%)\n\n\n1\n112 (3.8%)\n\n\n2\n743 (25%)\n\n\n3\n1,597 (55%)\n\n\n4\n400 (14%)\n\n\n5\n48 (1.6%)\n\n\n6\n21 (0.7%)\n\n\n8\n1 (&lt;0.1%)\n\n\nKitchen.AbvGr\n\n\n\n0\n3 (0.1%)\n\n\n1\n2,796 (95%)\n\n\n2\n129 (4.4%)\n\n\n3\n2 (&lt;0.1%)\n\n\nKitchen.Qual\n\n\n\nEx\n205 (7.0%)\n\n\nFa\n70 (2.4%)\n\n\nGd\n1,160 (40%)\n\n\nPo\n1 (&lt;0.1%)\n\n\nTA\n1,494 (51%)\n\n\nTotRms.AbvGrd\n6 (5, 7)\n\n\nFireplaces\n\n\n\n0\n1,422 (49%)\n\n\n1\n1,274 (43%)\n\n\n2\n221 (7.5%)\n\n\n3\n12 (0.4%)\n\n\n4\n1 (&lt;0.1%)\n\n\nGarage.Type\n\n\n\n2Types\n23 (0.8%)\n\n\nAttchd\n1,731 (62%)\n\n\nBasment\n36 (1.3%)\n\n\nBuiltIn\n186 (6.7%)\n\n\nCarPort\n15 (0.5%)\n\n\nDetchd\n782 (28%)\n\n\nUnknown\n157\n\n\nGarage.Area\n480 (320, 576)\n\n\nUnknown\n1\n\n\nWood.Deck.SF\n0 (0, 168)\n\n\nOpen.Porch.SF\n27 (0, 70)\n\n\nEnclosed.Porch\n0 (0, 0)\n\n\nX3Ssn.Porch\n0 (0, 0)\n\n\nScreen.Porch\n0 (0, 0)\n\n\nMo.Sold\n6 (4, 8)\n\n\nYr.Sold\n\n\n\n2006\n625 (21%)\n\n\n2007\n694 (24%)\n\n\n2008\n622 (21%)\n\n\n2009\n648 (22%)\n\n\n2010\n341 (12%)\n\n\nSale.Condition\n\n\n\nAbnorml\n190 (6.5%)\n\n\nAdjLand\n12 (0.4%)\n\n\nAlloca\n24 (0.8%)\n\n\nFamily\n46 (1.6%)\n\n\nNormal\n2,413 (82%)\n\n\nPartial\n245 (8.4%)\n\n\nSalePrice\n160,000 (129,500, 213,500)\n\n\n\n1 Median (Q1, Q3); n (%)"
  },
  {
    "objectID": "M1/M1LN1.html#variable-separation",
    "href": "M1/M1LN1.html#variable-separation",
    "title": "Data Partitioning and Feature Engineering",
    "section": "",
    "text": "The dataset contains both numeric and categorical variables. We need to separate them for further analysis. This is especially important for feature engineering.\n\nnum_vars&lt;-colnames(ames[sapply(ames, is.numeric) == TRUE])\ncat_vars&lt;-colnames(ames[sapply(ames, is.character) == TRUE])"
  },
  {
    "objectID": "M1/M1LN1.html#side-note-on-text-and-variable-outputs",
    "href": "M1/M1LN1.html#side-note-on-text-and-variable-outputs",
    "title": "Data Partitioning and Feature Engineering",
    "section": "",
    "text": "There are two ways we can use the variables from the r code in the text. The first one is by using stmt output using print and the other is using r output.\n\n\n\nstmt &lt;- paste(\"There are\", length(num_vars), \"numerical features and\", length(cat_vars), \"categorical features\" )\nprint(stmt, na.print = NULL)\n\n[1] \"There are 29 numerical features and 12 categorical features\"\n\n\n\n\n\nThere are 29 numerical features and 12 categorical features in this dataset."
  },
  {
    "objectID": "M1/M1LN1.html#test-set-approach",
    "href": "M1/M1LN1.html#test-set-approach",
    "title": "Data Partitioning and Feature Engineering",
    "section": "2.1 Test Set Approach",
    "text": "2.1 Test Set Approach\nThere are multiple ways to split your data in R (four ways shown below)Simple Random Sampling is one of them.\n\n2.1.1 Using base R\n\nset.seed(123)  # for reproducibility\nindex_1 &lt;- sample(1:nrow(ames), round(nrow(ames) * 0.8))\ntrain_1 &lt;- ames[index_1, ]\ntest_1  &lt;- ames[-index_1, ]\n\n# kable(head(train), \"html\") %&gt;% kable_styling(\"striped\") %&gt;% scroll_box(width = \"100%\")\nprint(dim(train_1))\n\n[1] 2344   41\n\nprint(dim(test_1))\n\n[1] 586  41\n\n\n\n\n2.1.2 Using caret package\n\nset.seed(123)  # for reproducibility\nindex_2 &lt;- createDataPartition(ames$SalePrice, p = 0.7, \n                               list = FALSE)\ntrain_2 &lt;- ames[index_2, ]\ntest_2  &lt;- ames[-index_2, ]\n\n\n\n2.1.3 Using rsample package\n\nset.seed(123)  # for reproducibility\nsplit_1  &lt;- initial_split(ames, prop = 0.7)\ntrain_3  &lt;- training(split_1)\ntest_3   &lt;- testing(split_1)\n\n\n\n2.1.4 Using h2o package\n\nsplit_2 &lt;- h2o.splitFrame(ames.h2o0, ratios = 0.7, \n                          seed = 123)\ntrain_4 &lt;- split_2[[1]]\ntest_4  &lt;- split_2[[2]]"
  },
  {
    "objectID": "M1/M1LN1.html#the-validation-set-approach",
    "href": "M1/M1LN1.html#the-validation-set-approach",
    "title": "Data Partitioning and Feature Engineering",
    "section": "2.2 The Validation Set Approach",
    "text": "2.2 The Validation Set Approach\nDraw a sample of size nrow(ames) from the numbers 1 to 3 (with replacement). You want approximately 70% of the sample to be 1 and the remaining 30% to be equally split between 2 and 3.\n\nset.seed(123)\npart &lt;-sample(1:3, size=nrow(ames), prob=c(0.7, 0.15, 0.15), replace=TRUE)\n\nWe can also create training, validation, and testing sets from the original data frame directly.\n\ntrain_5 &lt;-ames[part == 1, ] #subset ames to training indices only\nvalid_5 &lt;-ames[part == 2, ]\ntest_5 &lt;-ames[part == 3, ]"
  },
  {
    "objectID": "M1/M1LN1.html#stratified-random-sampling",
    "href": "M1/M1LN1.html#stratified-random-sampling",
    "title": "Data Partitioning and Feature Engineering",
    "section": "2.3 Stratified Random Sampling",
    "text": "2.3 Stratified Random Sampling\nThe easiest way to perform stratified sampling on a response variable is to use the rsample package, where you specify the response variable to strata. The following illustrates that in our original employee attrition data we have an imbalanced response (No: 84%, Yes: 16%). By enforcing stratified sampling, both our training and testing sets have approximately equal response distributions.\nLet’s import Job Attrition data from the rsample package.\n\n# Job attrition data\nlibrary(rsample)\nlibrary(modeldata)\nchurn &lt;- attrition %&gt;% \n  mutate_if(is.ordered, .funs = factor, ordered = FALSE)\nchurn.h2o &lt;- as.h2o(churn)\n\n\n2.3.1 Original response distribution\n\nt(table(churn$Attrition)) %&gt;% prop.table() %&gt;% round(4) %&gt;% kbl(format = \"html\",table.attr = \"style='width:30%;'\") %&gt;% kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),full_width = F, position = \"center\") \n\n\n\n\n\nNo\nYes\n\n\n\n\n0.8388\n0.1612\n\n\n\n\n\n\n\n\n2.3.2 Stratified sampling with the rsample package\n\nset.seed(123)\nsplit_strat  &lt;- initial_split(churn, prop = 0.7, \n                              strata = \"Attrition\")\ntrain_strat  &lt;- training(split_strat)\ntest_strat   &lt;- testing(split_strat)\n\nsplit &lt;- initial_split(ames, prop = 0.7, \n                       strata = \"SalePrice\")\names_train  &lt;- training(split)\names_test   &lt;- testing(split)\n\n\n\n2.3.3 Consistent response ratio between train & test\n\nlibrary(dplyr)\nlibrary(kableExtra)\n\ntrain_strat$Attrition %&gt;%\n  table() %&gt;%\n  t() %&gt;%\n  prop.table() %&gt;%\n  round(4) %&gt;%\n  knitr::kable(format = \"html\", table.attr = \"style='width:30%;'\") %&gt;%\n  kableExtra::kable_styling(\n    bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),\n    full_width = F, \n    position = \"center\"\n  )\n\n\n\n\n\nNo\nYes\n\n\n\n\n0.8395\n0.1605\n\n\n\n\n\n\nNow Test Dataframe\n\nt(table(test_strat$Attrition)) %&gt;% prop.table() %&gt;% round(4) %&gt;% knitr::kable(format = \"html\", table.attr = \"style='width:30%;'\") %&gt;% kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),full_width = F, position = \"center\") \n\n\n\n\n\nNo\nYes\n\n\n\n\n0.8371\n0.1629"
  },
  {
    "objectID": "M1/M1LN1.html#loading-packages",
    "href": "M1/M1LN1.html#loading-packages",
    "title": "Data Partitioning and Feature Engineering",
    "section": "3.1 Loading packages",
    "text": "3.1 Loading packages\n\nlibrary(dplyr)    # for data manipulation\nlibrary(ggplot2)  # for awesome graphics\nlibrary(visdat)   # for additional visualizations\n\n# Feature engineering packages\nlibrary(caret)    # for various ML tasks\nlibrary(recipes)  # for feature engineering tasks"
  },
  {
    "objectID": "M1/M1LN1.html#transformation",
    "href": "M1/M1LN1.html#transformation",
    "title": "Data Partitioning and Feature Engineering",
    "section": "3.2 Transformation",
    "text": "3.2 Transformation\nLet’s create a histogram of the SalePrice variable to understand the distribution of the variable.\n\nhist(ames$SalePrice, col ='blue')\n\n\n\n\n\n\n\n\nIt seems like the variable is skewed. We can apply a transformation to normalize the data to stick to the normality assumption. Let’s also calculate the moments of the variable to understand how much data is skewed. Also, this looks ugly; can we make it look better?\n\nlibrary(ggplot2)\n# color =  color of the histogram border\nlibrary(ggplot2)\nlibrary(scales)\n\nggplot(ames, aes(x = SalePrice)) +\n  geom_histogram(aes(y = after_stat(density)), fill = \"#336699\", color = \"black\", alpha = 0.65, bins = 25) + \n  labs(x = \"Sale Price\", y = \"Density\", title=\"Histogram of Sale Price\") +\n  scale_x_continuous(labels = label_comma(accuracy = 1)) +\n  # scale_y_continuous(labels = label_comma(accuracy = 1)) +\n  theme_light() +\n  theme(\n    plot.title = element_text(hjust = 0, face = \"bold\", size = 14),  # Left-align (hjust = 0) and bold the title\n    axis.title.x = element_text(size = 10, color = \"black\", face=\"bold\"),\n    axis.title.y = element_text(size = 10, color = \"black\", face=\"bold\"),\n    axis.text.x = element_text(size = 8, color = \"black\"),\n    axis.text.y = element_text(size = 8, color = \"black\")\n  )\n\n\n\n\n\n\n\n\n\n# install.packages(\"moments\")\nlibrary(moments)\nsaleprice_skew &lt;- skewness(ames$SalePrice)\n\nSkewness is \\(1.7426074 (&gt;1)\\), which indicates that data is positively or right skewed."
  },
  {
    "objectID": "M1/M1LN1.html#variable-transformation",
    "href": "M1/M1LN1.html#variable-transformation",
    "title": "Data Partitioning and Feature Engineering",
    "section": "3.3 Variable Transformation",
    "text": "3.3 Variable Transformation\n\n3.3.1 Log Transformation\nTransform the variable to a log transformation (natural log of variable)\n\nln_sales &lt;-log(ames$SalePrice)\n\nhist(ln_sales, col='blue', breaks = 40, main = \"Histogram of Log Sale Price\", xlab = \"Log Sale Price\", ylab = \"Frequency\")\n\n\n\n\n\n\n\nlog_sales = skewness(ln_sales)\n\nThe distribution appears to conform to a normal distribution. The skewness value is -0.0147859. The transformation has caused the distribution to become slightly negatively skewed. However, the variable’s distribution (output) is now closer to 0.\n\n\n3.3.2 Square Root Transformation\n\nsqt_sales &lt;- sqrt(ames$SalePrice)\nhist(sqt_sales, col='blue')\n\n\n\n\n\n\n\nsq_skewness&lt;- skewness(sqt_sales)\n\nThe distribution is not as normal as that of log transformation. The skewness value is 0.8843168, which means data is moderately positively skewed and performs worse than log transformation.\n\n\n3.3.3 Cube-Root Transformation\n\ncbt_sales &lt;- (ames$SalePrice)^(1/3)\nhist(cbt_sales, col='blue')\n\n\n\n\n\n\n\ncbt_skewnes &lt;- skewness(cbt_sales)\n\nThe data distribution is worse than log transformation but better than square root. The skewness value is 0.6069153, meaning data is positively skewed and performs better than square root (you may use log transformation).\n\n\n3.3.4 Box-Cox Transformation\n\n# | message: false\n# load package\nlibrary(sjPlot)\n\n\nAttaching package: 'sjPlot'\n\n\nThe following object is masked from 'package:ggplot2':\n\n    set_theme\n\nlibrary(sjmisc)\nlibrary(sjlabelled)\n\n\nAttaching package: 'sjlabelled'\n\n\nThe following object is masked from 'package:ggplot2':\n\n    as_label\n\n\nThe following object is masked from 'package:dplyr':\n\n    as_label\n\nm.ols &lt;- lm(SalePrice ~ Gr.Liv.Area, data=ames)\nols_summ &lt;- summary(m.ols)\n\ntab_model(m.ols)\n\n\n\n\n \nSale Price\n\n\nPredictors\nEstimates\nCI\np\n\n\n(Intercept)\n13289.63\n6878.48 – 19700.78\n&lt;0.001\n\n\nGr Liv Area\n111.69\n107.64 – 115.75\n&lt;0.001\n\n\nObservations\n2930\n\n\nR2 / R2 adjusted\n0.500 / 0.499\n\n\n\n\n\n\nlibrary(MASS)\n\n\nAttaching package: 'MASS'\n\n\nThe following object is masked from 'package:gtsummary':\n\n    select\n\n\nThe following object is masked from 'package:dplyr':\n\n    select\n\nbc &lt;- boxcox(m.ols)\n\n\n\n\n\n\n\nstr(bc)\n\nList of 2\n $ x: num [1:100] -2 -1.96 -1.92 -1.88 -1.84 ...\n $ y: num [1:100] -14038 -13806 -13577 -13351 -13127 ...\n\n(bc.power &lt;- bc$x[which.max(bc$y)])\n\n[1] 0.1818182\n\n\n\\[\ny_{transform}= (y^{\\lambda}-1)/\\lambda\n\\] We need to transform the response variable accordingly and re-compute the linear model with this transformed variable. We can write a function corresponding to the formula:\n\nBCTransform &lt;- function(y, lambda=0) {\n  if (lambda == 0L) { log(y) }\n  else { (y^lambda - 1) / lambda }\n}\n\n#Reverse Transformation\nBCTransformInverse &lt;- function(yt, lambda=0) {\n  if (lambda == 0L) { exp(yt) }\n  else { exp(log(1 + lambda * yt)/lambda) }\n}\n\names$SalePrice.bc &lt;- BCTransform(ames$SalePrice, bc.power)\nhist(ames$SalePrice.bc, breaks=30); rug(ames$SalePrice.bc)\n\n\n\n\n\n\n\nSPbc_skewness &lt;- skewness(ames$SalePrice.bc)\n\nsummary(m.ols.bc &lt;- lm(SalePrice.bc ~ Gr.Liv.Area, data=ames))\n\n\nCall:\nlm(formula = SalePrice.bc ~ Gr.Liv.Area, data = ames)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-21.5363  -1.3894   0.1928   1.4254   8.5499 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 3.594e+01  1.497e-01  240.14   &lt;2e-16 ***\nGr.Liv.Area 5.085e-03  9.456e-05   53.78   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.587 on 2928 degrees of freedom\nMultiple R-squared:  0.4969,    Adjusted R-squared:  0.4967 \nF-statistic:  2892 on 1 and 2928 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "M1/M1LN1.html#feature-scaling",
    "href": "M1/M1LN1.html#feature-scaling",
    "title": "Data Partitioning and Feature Engineering",
    "section": "3.4 Feature Scaling",
    "text": "3.4 Feature Scaling\nLet’s look at one of the continuous variables, Living Area. We want to scale the feature. In general, feature scaling refers to the process of standardizing the range of data features. Since the content of raw data values varies widely, in some machine learning algorithms, objective functions will not work properly without normalization.\nWe can perform Min-Max scaling or Z-score scaling. Min-Max Scaling transforms the data to a range between 0 and 1. Z-score scaling transforms the data into a mean of 0 and a standard deviation of 1.\nThe formula for Min-Max scaling is:\n\\[\n\\begin{align}\nx_{scaled} = \\frac{x - x_{min}}{x_{max} - x_{min}}\n\\end{align}\n\\]\nThe formula for Z-score scaling is:\n\\[\n\\begin{align}\nz = \\frac{x - \\mu}{\\sigma}\n\\end{align}\n\\]\nwhere \\(x\\) is the original feature vector, \\(\\mu\\) is the mean of that feature vector, and \\(\\sigma\\) is its standard deviation.\n\nG &lt;-ames$Gr.Liv.Area\nA &lt;-ames$Lot.Area\nmax_A &lt;- max(A)\nmin_A &lt;- min(A)\nmax_G &lt;- max(G)\nmin_G &lt;- min(G)\n\nThe range of Gr.Liv.Area is 334 to 5642. The range of Lot.Area is 1300 to 215245.\n\n3.4.1 Min-Max Scaling\n\nGr.Liv.Area_N = (G-min_G)/(max_G-min_G)\nLot.Area_N = (A-min_A)/(max_A-min_A)\n\nminmaxscaler &lt;-cbind.data.frame(ames, Gr.Liv.Area_N, Lot.Area_N)\nhead(minmaxscaler)\n\n  Order Lot.Frontage Lot.Area Lot.Shape Utilities Lot.Config Land.Slope\n1   117           80     9600       Reg    AllPub     Inside        Gtl\n2   325           94     9400       Reg    AllPub     Corner        Gtl\n3   337           70     7700       Reg    AllPub     Inside        Gtl\n4   393           60     9000       Reg    AllPub        FR2        Gtl\n5   590           NA    13774       IR1    AllPub     Inside        Gtl\n6   667           81     9671       Reg    AllPub     Corner        Gtl\n  Neighborhood Bldg.Type House.Style Overall.Qual Overall.Cond Year.Built\n1       NWAmes      1Fam      2Story            6            6       1971\n2      Mitchel    Duplex      2Story            6            5       1971\n3      Mitchel    Duplex      2Story            5            2       1985\n4        NAmes    Duplex      2Story            5            5       1974\n5       NWAmes      1Fam      2Story            7            7       1977\n6        NAmes    Duplex      2Story            6            5       1969\n  Year.Remod.Add Foundation Bsmt.Unf.SF Total.Bsmt.SF BaseLivArea Central.Air\n1           1971     CBlock         386           715         329           Y\n2           1971     CBlock         912           912           0           Y\n3           1986      PConc        1216          1216           0           Y\n4           1974     CBlock         896           896           0           Y\n5           1992      PConc         476           908         432           Y\n6           1969     CBlock        1248          1248           0           Y\n  X1st.Flr.SF X2nd.Flr.SF Gr.Liv.Area Full.Bath Half.Bath Bathrooms\n1         930         715        1645         1         2         2\n2         912         912        1824         2         2         3\n3        1216        1216        2432         4         2         5\n4         896         896        1792         2         2         3\n5        1316         972        2288         1         2         2\n6        1248        1296        2544         2         2         3\n  Bedroom.AbvGr Kitchen.AbvGr Kitchen.Qual TotRms.AbvGrd Fireplaces Garage.Type\n1             4             1           TA             7          0      Attchd\n2             4             2           TA             8          0        &lt;NA&gt;\n3             4             2           TA            10          0      Attchd\n4             4             2           TA             8          0        &lt;NA&gt;\n5             4             1           Gd             8          2      Attchd\n6             6             2           TA            12          0      Attchd\n  Garage.Area Wood.Deck.SF Open.Porch.SF Enclosed.Porch X3Ssn.Porch\n1         441            0            78              0           0\n2           0          128             0              0           0\n3         616          200             0              0           0\n4           0           32            45              0           0\n5         520          321            72              0           0\n6         907            0             0              0           0\n  Screen.Porch Mo.Sold Yr.Sold Sale.Condition SalePrice SalePrice.bc\n1            0       6    2010         Normal    171000     43.68317\n2            0       4    2010         Normal    139000     41.86486\n3            0       2    2010         Normal    159000     43.03681\n4            0       9    2009         Normal    136000     41.67733\n5          156      11    2009         Normal    230000     46.40657\n6            0       8    2009         Normal    190000     44.63443\n  Gr.Liv.Area_N Lot.Area_N\n1     0.2469857 0.03879502\n2     0.2807084 0.03786020\n3     0.3952524 0.02991423\n4     0.2746797 0.03599056\n5     0.3681236 0.05830470\n6     0.4163527 0.03912688\n\n\n\n\n3.4.2 Standardize (z scores)\n\nz_Gr.Liv.Area &lt;- (ames$Gr.Liv.Area -mean(ames$Gr.Liv.Area))/sd(ames$Gr.Liv.Area)\nz_Lot.Area &lt;-(ames$Lot.Area -mean(ames$Lot.Area))/sd(ames$Lot.Area)\n\nzscore &lt;-cbind.data.frame(ames, z_Gr.Liv.Area, z_Lot.Area)\nhead(zscore)\n\n  Order Lot.Frontage Lot.Area Lot.Shape Utilities Lot.Config Land.Slope\n1   117           80     9600       Reg    AllPub     Inside        Gtl\n2   325           94     9400       Reg    AllPub     Corner        Gtl\n3   337           70     7700       Reg    AllPub     Inside        Gtl\n4   393           60     9000       Reg    AllPub        FR2        Gtl\n5   590           NA    13774       IR1    AllPub     Inside        Gtl\n6   667           81     9671       Reg    AllPub     Corner        Gtl\n  Neighborhood Bldg.Type House.Style Overall.Qual Overall.Cond Year.Built\n1       NWAmes      1Fam      2Story            6            6       1971\n2      Mitchel    Duplex      2Story            6            5       1971\n3      Mitchel    Duplex      2Story            5            2       1985\n4        NAmes    Duplex      2Story            5            5       1974\n5       NWAmes      1Fam      2Story            7            7       1977\n6        NAmes    Duplex      2Story            6            5       1969\n  Year.Remod.Add Foundation Bsmt.Unf.SF Total.Bsmt.SF BaseLivArea Central.Air\n1           1971     CBlock         386           715         329           Y\n2           1971     CBlock         912           912           0           Y\n3           1986      PConc        1216          1216           0           Y\n4           1974     CBlock         896           896           0           Y\n5           1992      PConc         476           908         432           Y\n6           1969     CBlock        1248          1248           0           Y\n  X1st.Flr.SF X2nd.Flr.SF Gr.Liv.Area Full.Bath Half.Bath Bathrooms\n1         930         715        1645         1         2         2\n2         912         912        1824         2         2         3\n3        1216        1216        2432         4         2         5\n4         896         896        1792         2         2         3\n5        1316         972        2288         1         2         2\n6        1248        1296        2544         2         2         3\n  Bedroom.AbvGr Kitchen.AbvGr Kitchen.Qual TotRms.AbvGrd Fireplaces Garage.Type\n1             4             1           TA             7          0      Attchd\n2             4             2           TA             8          0        &lt;NA&gt;\n3             4             2           TA            10          0      Attchd\n4             4             2           TA             8          0        &lt;NA&gt;\n5             4             1           Gd             8          2      Attchd\n6             6             2           TA            12          0      Attchd\n  Garage.Area Wood.Deck.SF Open.Porch.SF Enclosed.Porch X3Ssn.Porch\n1         441            0            78              0           0\n2           0          128             0              0           0\n3         616          200             0              0           0\n4           0           32            45              0           0\n5         520          321            72              0           0\n6         907            0             0              0           0\n  Screen.Porch Mo.Sold Yr.Sold Sale.Condition SalePrice SalePrice.bc\n1            0       6    2010         Normal    171000     43.68317\n2            0       4    2010         Normal    139000     41.86486\n3            0       2    2010         Normal    159000     43.03681\n4            0       9    2009         Normal    136000     41.67733\n5          156      11    2009         Normal    230000     46.40657\n6            0       8    2009         Normal    190000     44.63443\n  z_Gr.Liv.Area  z_Lot.Area\n1     0.2874520 -0.06953307\n2     0.6415507 -0.09491373\n3     1.8442990 -0.31064928\n4     0.5782481 -0.14567503\n5     1.5594376  0.46016117\n6     2.0658580 -0.06052294"
  },
  {
    "objectID": "M1/M1LN1.html#feature-construction",
    "href": "M1/M1LN1.html#feature-construction",
    "title": "Data Partitioning and Feature Engineering",
    "section": "3.5 Feature Construction",
    "text": "3.5 Feature Construction\n\n3.5.1 Unsupervised Binning\nAutomatic Binning can be used to determine the number of bins to be created. The bins are created based on the distribution of the data. The bins are created so that the data points in each bin are more similar and the data points in different bins are less similar.\n\nsummary(ames$Overall.Qual)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.000   5.000   6.000   6.095   7.000  10.000 \n\ncount(ames, Overall.Qual)\n\n   Overall.Qual   n\n1             1   4\n2             2  13\n3             3  40\n4             4 226\n5             5 825\n6             6 732\n7             7 602\n8             8 350\n9             9 107\n10           10  31\n\nOverall.Qual_Bin &lt;- cut(ames$Overall.Qual, breaks=4)\nhead(Overall.Qual_Bin)\n\n[1] (5.5,7.75] (5.5,7.75] (3.25,5.5] (3.25,5.5] (5.5,7.75] (5.5,7.75]\nLevels: (0.991,3.25] (3.25,5.5] (5.5,7.75] (7.75,10]\n\n\n\n\n3.5.2 Manual binning\nWe need to know the min and max values. For example, say min=1 and max=10 then the bins will be 0-5, 5-6, 6-7, 7-10.\n\nOverall.Qual_MBin &lt;- cut(ames$Overall.Qual, breaks = c(0, 5, 6, 7, 10))\nbarchart(Overall.Qual_MBin, main = \"Overall Quality Manual Binning\")\n\n\n\n\n\n\n\n\nSometimes, features will contain levels that have very few observations. For example, there are 28 unique neighborhoods represented in the Ames housing data, but several of them have fewer observations than the others.\n\ncount(train_1, Neighborhood) %&gt;% arrange(n) %&gt;% head() %&gt;% kbl() %&gt;% kable_styling(bootstrap_options = c(\"striped\", \"hover\", \"condensed\", \"responsive\"),full_width = F, position = \"center\") \n\n\n\n\n\nNeighborhood\nn\n\n\n\n\nLandmrk\n1\n\n\nGrnHill\n2\n\n\nBlueste\n8\n\n\nGreens\n8\n\n\nNPkVill\n15\n\n\nVeenker\n21\n\n\n\n\n\n\nIn the above examples, we may want to collapse all levels observed in less than 10% of the training sample into an “other” category. We can use step_other() to do so. For example, Screen.Porch has 92% values recorded as zero (zero square footage meaning no screen porch), and the remaining 8% have unique dispersed values.\n\nlibrary(flextable)\n\n\nAttaching package: 'flextable'\n\n\nThe following object is masked from 'package:gtsummary':\n\n    continuous_summary\n\n\nThe following objects are masked from 'package:kableExtra':\n\n    as_image, footnote\n\narrange(count(train_1, Screen.Porch),n) %&gt;% flextable()\n\nScreen.Porchn4015316016316418018819019419519911041109111111131117111911211122112311261128113011351141114311451150115211541162116311641165116611781184118511901197119812011217122012211222123112341252126012631264127012711276128012871291131213421348137413851396144014901576192210821162138214021702175217621822196220422272240225522592266232221003112311531423147315331563195321032253256315541894288416051805224520062167120814481688192902,137\n\n\n\n\n3.5.3 Standardize and Normalize\n\n# Normalize all numeric columns\nrecipe(SalePrice ~ ., data = train_1) %&gt;%\n    step_YeoJohnson(all_numeric())    \n\n\n\n\n── Recipe ──────────────────────────────────────────────────────────────────────\n\n\n\n\n\n── Inputs \n\n\nNumber of variables by role\n\n\noutcome:    1\npredictor: 40\n\n\n\n\n\n── Operations \n\n\n• Yeo-Johnson transformation on: all_numeric()\n\n##standardize\n\n# train_1 %&gt;%\n#     step_center(all_numeric(), -all_outcomes()) %&gt;%\n#     step_scale(all_numeric(), -all_outcomes())\n\n\n\n3.5.4 Lump levels for two features\n\n# lumping &lt;- recipe(SalePrice ~ ., data = train_1) %&gt;%\n#   step_other(Neighborhood, threshold = 0.01, \n#              other = \"other\") %&gt;%\n#   step_other(Screen.Porch, threshold = 0.1, \n#              other = \"&gt;0\")\n\nlumping &lt;- recipe(SalePrice ~ ., data = train_1) %&gt;%\n  step_mutate(Screen.Porch = factor(ifelse(Screen.Porch &gt; 0, \"&gt;0\", \"0\"))) %&gt;%\n  step_other(Neighborhood, threshold = 0.01, other = \"other\") %&gt;%\n  step_other(Screen.Porch, threshold = 0.1, other = \"&gt;0\")\n\n\n3.5.4.1 Modified Code\n\nrecipe(Sale_Price ~ ., data = train_1):\n\nInitialization remains similar but uses Sale_Price as the outcome instead of SalePrice.\n\nstep_mutate(Screen.Porch = factor(ifelse(Screen.Porch &gt; 0, \"&gt;0\", \"0\"))):\nThis new step converts the numeric Screen.Porch variable into a binary categorical variable. If the value in Screen.Porch is greater than 0, it’s labeled as “&gt;0”, otherwise “0”.\nstep_other(Neighborhood, threshold = 0.01, other = \"other\"):\nThis step remains unchanged from the original code.\nstep_other(Screen.Porch, threshold = 0.1, other = \"&gt;0\"):\nSimilar to the original code, but applied on the newly created binary categorical Screen.Porch.\n\n\n\n\n3.5.5 Apply this blueprint\n\napply_2_training &lt;- prep(lumping, training = train_1) %&gt;%\n  bake(train_1)\n\n\n\n3.5.6 New distribution of Neighborhood\n\ncount(apply_2_training, Neighborhood) %&gt;% arrange(n) %&gt;% flextable()\n\nNeighborhoodnBrDale27MeadowV34ClearCr36StoneBr39SWISU41NoRidge54Timber58IDOTRR74other77Crawfor88BrkSide89Mitchel99NWAmes103SawyerW103Sawyer126NridgHt130Gilbert133Edwards141Somerst142OldTown183CollgCr213NAmes354\n\n\n\n\n3.5.7 New distribution of Screen.Porch\n\ncount(apply_2_training, Screen.Porch) %&gt;% arrange(n) %&gt;% flextable()\n\nScreen.Porchn&gt;020702,137\n\n\n\n\n3.5.8 Variable Encoding\nThe categorical variables are very often found in data while conducting data analysis and ML(machine learning). The Data which can be classified into categories or groups, such as colors or job titles is generally called as categorical data. The categorical variables must be encoded into numerical values in order to be used in statistical analysis or ML models.\nWarning: Dummies package is no longer available in R repository.\n\n3.5.8.1 Using fastDummies package\nWe can create dummy variables for all cat variables in the dataset\n\nlibrary(fastDummies)\names_train_dummies &lt;- dummy_cols(train_1, select_columns = NULL, remove_first_dummy = TRUE)\names_test_dummies &lt;- dummy_cols(test_1, select_columns = NULL, remove_first_dummy = TRUE)\n\n\n\n3.5.8.2 One-hot encoding (caret)\n\n# Create dummy variables transformation\ndummies &lt;- dummyVars(SalePrice ~ ., data = ames)\n\n# Apply transformation to dataset\names_dummies &lt;- data.frame(predict(dummies, newdata = ames))\n\n\n\n3.5.8.3 Label encoding (caret)\n\n# Identify columns with class 'factor'\nfactor_columns &lt;- sapply(ames, is.factor)\n\n# Apply label encoding on those columns\names[factor_columns] &lt;- lapply(ames[factor_columns], function(x) as.numeric(as.factor(x)))\n\nHere, we only had one class variable for multiple class variables, convert all into factors first. Apply the above R code to simultaneously get various categories."
  },
  {
    "objectID": "M1/M1LN1.html#missing-values",
    "href": "M1/M1LN1.html#missing-values",
    "title": "Data Partitioning and Feature Engineering",
    "section": "3.6 Missing Values",
    "text": "3.6 Missing Values\n\n3.6.1 #Missing data visualization\nLet’s look at all missingness in Ames dataset\n\nlibrary(visdat)\n\nvis_miss(AmesHousing::ames_raw, cluster = TRUE)\n\n\n\n\n\n\n\n\nMissing value imputation Features where null / missing values are less than 40% for categorical variables are replaced with mode which is value whose frequency is maximum.\n\nMode = function(x){\n  ta = table(x)\n  tam = max(ta)\n  mod = names(ta)[ta==tam]\n  return(mod)\n}\n\nIdentify numeric variables and treat them with mean value if any missing / null values exists\n\nfor (col_name in colnames(ames[sapply(ames, is.factor) == TRUE])) {\n  \n  if (sum(is.na(ames[[col_name]])) &gt; 0) {\n    ames[col_name][is.na(ames[col_name])] &lt;- Mode(ames[[col_name]])\n    stmt &lt;- paste('Null values of', col_name, ' feature has been replaced by mode value ', \n                  Mode(ames[[col_name]]))\n    print(stmt, na.print = NULL)\n  }\n}\n\n\\[\n\\begin{align}\nlog(SalePrice) = \\beta_{o}+\\beta_{1}X_{1}\\\\\nSalePrice = e^{\\beta_{o}+\\beta_{1}X_{1}}\\\\\nSalePrice = B e^{\\beta_{1}X_{1}}\\\\\n\\end{align}\n\\]"
  }
]